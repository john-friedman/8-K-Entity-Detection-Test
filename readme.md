# Entity Detection Test

Learning project to figure out how to apply NLP to large corpuses for good quality and low cost. See [article](https://medium.com/@jgfriedman99/nlp-on-a-budget-c8cc5ce3ef5c)

## Corpus
- Every 8-K and attachment in 2024.
- About 1 billion tokens after cleaning.

## Estimates
- Took about 10 hours on my laptop
- Could process using AWS spot instances for ~$0.50

## Code
- data_download.py
- data_prep.py
- spacytestwithcaching.py
- construct_persons_dataset.py

## Data
- example_data_ingest/ - example data for nlp
- records/ - output after nlp
- persons/ - cleaned data

## Visualization
See [website](https://datamule.xyz/fun-stuff/8k_network_graph)
## Logs

Note that batches 0 through 9 were processed seperately.

| Batch | Cache Hits | Cache Hit Rate | Estimated Tokens | Processing Time (s) |
|-------|------------|----------------|------------------|---------------------|
| 9 | 57,637 | 27.8% | 20,465,723 | 666.83 |
| 10 | 32,390 | 23.7% | 12,723,304 | 538.19 |
| 11 | 45,407 | 28.4% | 15,157,045 | 591.83 |
| 12 | 76,475 | 39.1% | 18,875,242 | 610.34 |
| 13 | 73,756 | 42.3% | 17,053,514 | 652.24 |
| 14 | 39,869 | 27.7% | 13,425,531 | 646.33 |
| 15 | 40,806 | 30.2% | 12,285,742 | 584.13 |
| 16 | 65,133 | 36.0% | 17,256,002 | 739.23 |
| 17 | 80,084 | 43.0% | 18,163,590 | 681.16 |
| 18 | 83,045 | 38.9% | 21,187,669 | 869.76 |
| 19 | 41,749 | 32.4% | 11,423,422 | 547.52 |
| 20 | 59,680 | 31.9% | 17,020,680 | 758.99 |
| 21 | 83,023 | 41.8% | 19,509,014 | 745.98 |
| 22 | 44,655 | 27.4% | 15,491,036 | 751.26 |
| 23 | 49,863 | 31.7% | 15,109,040 | 686.69 |
| 24 | 161,460 | 54.9% | 29,093,660 | 869.02 |
| 25 | 51,412 | 34.6% | 13,880,305 | 621.42 |
| 26 | 80,317 | 42.0% | 18,577,460 | 726.48 |
| 27 | 76,867 | 45.2% | 16,271,609 | 590.55 |
| 28 | 99,402 | 46.4% | 21,263,285 | 742.60 |
| 29 | 47,508 | 33.5% | 13,535,642 | 602.00 |
| 30 | 48,509 | 32.5% | 14,267,098 | 647.91 |
| 31 | 48,964 | 34.3% | 13,243,302 | 592.85 |
| 32 | 50,191 | 32.4% | 14,363,800 | 646.90 |
| 33 | 49,077 | 29.4% | 15,167,492 | 721.29 |
| 34 | 48,465 | 33.3% | 13,548,483 | 624.74 |
| 35 | 76,834 | 42.9% | 16,590,360 | 638.18 |
| 36 | 50,293 | 33.3% | 13,872,026 | 628.34 |
| 37 | 56,289 | 37.6% | 13,635,174 | 591.35 |
| 38 | 55,897 | 35.1% | 15,281,594 | 672.07 |
| 39 | 95,298 | 44.8% | 20,938,338 | 782.83 |
| 40 | 47,536 | 35.6% | 12,116,847 | 561.86 |
| 41 | 107,101 | 52.2% | 20,862,034 | 664.04 |
| 42 | 97,412 | 49.8% | 19,579,474 | 640.60 |
| 43 | 99,159 | 47.1% | 20,764,020 | 728.65 |
| 44 | 87,954 | 47.3% | 18,011,300 | 659.26 |
| 45 | 67,370 | 38.4% | 16,488,691 | 713.55 |
| 46 | 49,527 | 31.6% | 14,215,304 | 647.95 |
| 47 | 96,087 | 49.5% | 18,440,328 | 651.45 |
| 48 | 55,742 | 40.7% | 12,324,692 | 531.60 |
| 49 | 60,012 | 38.5% | 15,036,300 | 640.15 |
| 50 | 95,598 | 49.4% | 18,583,114 | 634.03 |
| 51 | 88,432 | 46.1% | 17,833,298 | 653.43 |
| 52 | 110,313 | 55.1% | 19,750,409 | 603.50 |
| 53 | 72,913 | 42.8% | 16,700,339 | 651.25 |
| 54 | 120,437 | 56.4% | 20,622,793 | 611.87 |
| 55 | 63,602 | 41.8% | 14,730,180 | 604.31 |
| 56 | 62,792 | 40.2% | 14,803,904 | 612.44 |
| 57 | 59,149 | 35.8% | 15,785,417 | 684.47 |
| 58 | 116,976 | 53.7% | 21,169,940 | 645.03 |
| 59 | 80,015 | 42.4% | 18,220,880 | 700.36 |
| 60 | 70,296 | 39.3% | 16,597,205 | 702.97 |
| 61 | 112,275 | 52.0% | 20,394,046 | 439.80 |
| 62 | 81,754 | 51.4% | 14,937,948 | 391.93 |
| 63 | 57,869 | 39.9% | 13,782,297 | 570.99 |
| 64 | 58,237 | 35.4% | 15,492,767 | 648.84 |
| 65 | 59,031 | 44.0% | 12,432,330 | 479.54 |